#!/usr/bin/env bash

repo_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )/.." >/dev/null 2>&1 && pwd )"
script_dir="$repo_dir/bin"
source "$script_dir/bash_utils.sh"

os_env="$(get_os_type)"

case "$os_env" in
    "windows")
        echo "Installing windows dependencies ..."
        set -x
        choco install nasm
        set +x
        ;;
    "linux")
        echo "Installing Centos dependencies ..."
        set -x
        echo "Installing dependencies ..."
        yum install -y which python3
        yum install -y centos-release-scl
        yum install -y devtoolset-8

        echo "Enabling devtoolset-8 ..."
        #scl enable devtoolset-8 -- bash
        source /opt/rh/devtoolset-8/enable
        set +x
        ;;
    # Temporarily disabling as it was causing build to fail for unknown reasons
    #"macos")
    #    echo "Installing macos dependencies ..."
    #    set -x
    #    brew install ccache
    #    set +x
    #    ;;
    *)
        echo "No dependencies to install for '$os_env'"
        ;;
esac
